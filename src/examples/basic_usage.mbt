/// åŸºç¡€ä½¿ç”¨ç¤ºä¾‹
/// å±•ç¤º MoonBit ZSTD åº“çš„åŸºæœ¬åŠŸèƒ½

/// åŸºç¡€è§£å‹ç¼©ç¤ºä¾‹
pub fn basic_decompression_example() -> Unit {
  println("=== åŸºç¡€è§£å‹ç¼©ç¤ºä¾‹ ===")
  
  // ç¤ºä¾‹ ZSTD æ•°æ® (è¿™é‡Œä½¿ç”¨å ä½ç¬¦)
  let sample_zstd_data = b"(\xb5/\xfd\x00\x00\x15\x00\x00\x00\x00"
  
  // æ£€æŸ¥æ˜¯å¦ä¸º ZSTD æ•°æ®
  let is_zstd = @api.is_zstd_data(sample_zstd_data)
  println("æ˜¯å¦ä¸º ZSTD æ•°æ®: " + is_zstd.to_string())
  
  // åˆ†ææ–‡ä»¶ç»“æ„
  let analysis = @api.analyze_zstd_file(sample_zstd_data)
  if analysis.is_valid {
    println("âœ… æ–‡ä»¶åˆ†ææˆåŠŸ:")
    println("  - æ–‡ä»¶å¤§å°: " + analysis.file_size.to_string() + " å­—èŠ‚")
    println("  - å—æ•°é‡: " + analysis.total_blocks.to_string())
    println("  - é¦–å—ç±»å‹: " + analysis.first_block_type)
    println("  - å•æ®µæ¨¡å¼: " + analysis.single_segment.to_string())
    println("  - å†…å®¹æ ¡éªŒ: " + analysis.content_checksum.to_string())
  } else {
    println("âŒ æ–‡ä»¶åˆ†æå¤±è´¥: " + analysis.error_message)
  }
  
  // å°è¯•è§£å‹ç¼©
  let decompressed = @api.decompress(sample_zstd_data)
  println("è§£å‹ç¼©ç»“æœé•¿åº¦: " + decompressed.length().to_string() + " å­—èŠ‚")
}

/// æ–‡ä»¶éªŒè¯ç¤ºä¾‹
pub fn file_validation_example() -> Unit {
  println("\n=== æ–‡ä»¶éªŒè¯ç¤ºä¾‹ ===")
  
  // æœ‰æ•ˆçš„ ZSTD é­”æ•°
  let valid_zstd = b"(\xb5/\xfd\x00\x00\x15\x00\x00\x00\x00"
  let invalid_data = b"Not ZSTD data"
  
  println("éªŒè¯æœ‰æ•ˆ ZSTD æ•°æ®:")
  let (is_valid1, message1) = @api.validate_zstd_file(valid_zstd)
  println("  ç»“æœ: " + is_valid1.to_string() + " - " + message1)
  
  println("éªŒè¯æ— æ•ˆæ•°æ®:")
  let (is_valid2, message2) = @api.validate_zstd_file(invalid_data)
  println("  ç»“æœ: " + is_valid2.to_string() + " - " + message2)
}

/// å‹ç¼©ç‡è®¡ç®—ç¤ºä¾‹
pub fn compression_ratio_example() -> Unit {
  println("\n=== å‹ç¼©ç‡è®¡ç®—ç¤ºä¾‹ ===")
  
  let original_size = 1000
  let compressed_size = 400
  
  let ratio = @api.get_compression_ratio(original_size, compressed_size)
  println("åŸå§‹å¤§å°: " + original_size.to_string() + " å­—èŠ‚")
  println("å‹ç¼©å¤§å°: " + compressed_size.to_string() + " å­—èŠ‚")
  println("å‹ç¼©ç‡: " + ratio.to_string() + "%")
  
  let space_saved = ((original_size - compressed_size).to_double() / original_size.to_double()) * 100.0
  println("èŠ‚çœç©ºé—´: " + space_saved.to_string() + "%")
}

/// è¿è¡Œæ‰€æœ‰åŸºç¡€ç¤ºä¾‹
pub fn run_basic_examples() -> Unit {
  println("ğŸš€ MoonBit ZSTD åŸºç¡€ä½¿ç”¨ç¤ºä¾‹")
  println("=================================")
  
  basic_decompression_example()
  file_validation_example()
  compression_ratio_example()
  
  println("\nâœ¨ åŸºç¡€ç¤ºä¾‹æ¼”ç¤ºå®Œæˆï¼")
}